<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–°–í–û–Ø –ö–£–•–ù–Ø ‚Äî –¥–æ—Å—Ç–∞–≤–∫–∞ –µ–¥—ã</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:700&display=swap" rel="stylesheet">
  <style>
    :root{
      --brand-olive:#556B2F;
      --brand-olive-light:#7B8A2F;
      --bg-cream:#f7efe0;
      --accent:#b3611f;
      --muted:#7c6a5c;
      --card-border:#6b7a29;
    }
    html,body{height:100%;}
    body {
      background: var(--bg-cream);
      font-family: 'PT Sans Narrow', Arial, sans-serif;
      margin:0;
      min-height:100vh;
      color:#2b2b2b;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    @keyframes fadeInDown {
      from { opacity:0; transform:translateY(-30px); }
      to { opacity:1; transform:translateY(0); }
    }

    .header {
      text-align:center;
      padding:28px 12px 10px 12px;
      background: linear-gradient(90deg, var(--brand-olive) 0%, var(--brand-olive-light) 100%);
      box-shadow:0 2px 10px rgba(0,0,0,0.08);
      position:relative;
      animation: fadeInDown 0.6s ease;
    }
    .logo-wrap {
      display:flex;
      align-items:center;
      justify-content:center;
      gap:14px;
      flex-wrap:wrap;
    }
    @keyframes logoPop { 
      0% {transform:scale(0.7) rotate(-10deg); opacity:0;} 
      60% {transform:scale(1.1) rotate(5deg);}
      100% {transform:scale(1) rotate(0deg); opacity:1;} 
    }
    .logo-img {
      width:84px;
      height:84px;
      object-fit:cover;
      border-radius:50%;
      border: none;
      background: transparent;
      padding: 0;
      box-shadow:0 6px 18px rgba(0,0,0,0.12);
      animation:logoPop .6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    .header-title {
      font-size:2.0em;
      color:#fff;
      font-weight:800;
      letter-spacing:1px;
      text-shadow:0 1px 6px rgba(0,0,0,0.12);
      margin-bottom:0;
      animation: fadeInDown 0.6s ease 0.2s backwards;
    }
    .header-desc {
      color:#fffbe6;
      font-size:1.02em;
      font-weight:700;
      letter-spacing:0.5px;
      margin-top:6px;
      opacity:0.95;
      animation: fadeInDown 0.6s ease 0.3s backwards;
    }
    
    @keyframes starPulse {
      0%, 100% { transform:scale(1) rotate(0deg); }
      50% { transform:scale(1.2) rotate(180deg); }
    }
    .promo-banner {
      text-align:center;
      margin-top:10px;
      margin-bottom:10px;
      letter-spacing:1px;
      animation: fadeInDown 0.6s ease 0.4s backwards;
    }
    .promo-star { 
      color:var(--accent); 
      font-size:1.6em; 
      vertical-align:middle;
      display:inline-block;
      animation: starPulse 2s ease-in-out infinite;
    }
    .promo-star:first-child {
      animation-delay: 0s;
    }
    .promo-star:last-child {
      animation-delay: 1s;
    }
    .promo-text { color:#fffbe6; font-weight:700; margin:0 8px; }

    @keyframes slideInUp {
      from { opacity:0; transform:translateY(20px); }
      to { opacity:1; transform:translateY(0); }
    }

    .menu-controls {
      max-width:1100px;
      margin:20px auto 10px;
      padding:0 12px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:center;
      animation: slideInUp 0.5s ease 0.3s backwards;
    }
    .menu-controls button {
      background:var(--brand-olive);
      color:#fff;
      border:none;
      border-radius:8px;
      padding:8px 16px;
      font-size:0.95em;
      font-weight:700;
      cursor:pointer;
      font-family: 'PT Sans Narrow', Arial, sans-serif;
      transition:all .3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      position:relative;
      overflow:hidden;
    }
    .menu-controls button::before {
      content:'';
      position:absolute;
      top:50%;
      left:50%;
      width:0;
      height:0;
      border-radius:50%;
      background:rgba(255,255,255,0.3);
      transform:translate(-50%, -50%);
      transition:width 0.6s, height 0.6s;
    }
    .menu-controls button:hover::before {
      width:300px;
      height:300px;
    }
    .menu-controls button:hover {
      background:var(--brand-olive-light);
      transform:translateY(-3px) scale(1.05);
      box-shadow:0 5px 15px rgba(0,0,0,0.2);
    }
    .menu-controls button.active {
      background:var(--accent);
      transform:scale(1.1);
    }

    .menu {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap:18px;
      justify-items:center;
      align-items:start;
      grid-auto-rows: 1fr;
      max-width:1100px;
      margin:26px auto 80px;
      padding:0 12px;
      box-sizing:border-box;
    }

    @keyframes cardFadeIn {
      from { opacity:0; transform:translateY(30px) scale(0.9); }
      to { opacity:1; transform:translateY(0) scale(1); }
    }

    .product {
      background: #fff;
      border-radius:14px;
      box-shadow:0 4px 18px rgba(0,0,0,0.06);
      width:100%;
      max-width:220px;
      padding:16px 12px 14px;
      display:flex; 
      flex-direction:column;
      justify-content:space-between;
      transition:all .3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      position:relative;
      border:2px solid var(--card-border);
      font-family: 'PT Sans Narrow', Arial, sans-serif;
      box-sizing:border-box;
      height:100%;
      animation: cardFadeIn 0.5s ease backwards;
    }
    .product:nth-child(1) { animation-delay: 0.1s; }
    .product:nth-child(2) { animation-delay: 0.15s; }
    .product:nth-child(3) { animation-delay: 0.2s; }
    .product:nth-child(4) { animation-delay: 0.25s; }
    .product:nth-child(5) { animation-delay: 0.3s; }
    .product:nth-child(6) { animation-delay: 0.35s; }
    
    .product:not(.unavailable):hover {
      transform:translateY(-8px) scale(1.03) rotate(1deg);
      box-shadow:0 12px 35px rgba(0,0,0,0.15);
      border-color:var(--brand-olive-light);
    }
    .product.unavailable { opacity:.6; pointer-events:none; }
    
    @keyframes imageZoom {
      0% { transform:scale(1); }
      100% { transform:scale(1.1); }
    }
    
    .product-img {
      width:100px; 
      height:100px; 
      object-fit:cover; 
      border-radius:12px; 
      margin-bottom:10px; 
      background:#eee;
      border:2px solid var(--brand-olive);
      flex: 0 0 auto;
      cursor:pointer;
      transition:all 0.4s ease;
    }
    .product:hover .product-img {
      transform:scale(1.1) rotate(3deg);
      box-shadow:0 8px 20px rgba(0,0,0,0.2);
    }
    
    .product-name {
      font-size:1.05em; 
      font-weight:700; 
      color:var(--brand-olive); 
      margin-bottom:6px; 
      text-align:center;
      letter-spacing:1px; 
      text-transform:uppercase;
      transition:color 0.3s;
    }
    .product:hover .product-name {
      color:var(--accent);
    }
    
    .product-desc {
      color:var(--muted); 
      font-size:.95em; 
      margin-bottom:6px; 
      text-align:center; 
      min-height:36px;
      flex: 1 1 auto;
    }
    .product-price {
      font-size:1.05em; 
      color:#222; 
      margin-bottom:10px; 
      font-weight:700; 
      letter-spacing:0.5px;
    }
    .controls { 
      display:flex; 
      align-items:center; 
      gap:8px; 
      flex-wrap:wrap; 
      justify-content:center; 
    }
    .add-btn, .remove-btn {
      border:none; 
      border-radius:8px; 
      font-size:1em; 
      padding:6px 12px; 
      margin:0 4px; 
      cursor:pointer; 
      transition:all .3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      font-family: 'PT Sans Narrow', Arial, sans-serif;
      font-weight:700;
    }
    .add-btn { 
      background:var(--brand-olive); 
      color:#fff; 
      box-shadow:0 2px 6px rgba(91,104,44,0.12); 
    }
    .add-btn:hover {
      transform:translateY(-2px) scale(1.1);
      box-shadow:0 4px 12px rgba(91,104,44,0.3);
    }
    .remove-btn { 
      background:#fff; 
      color:var(--brand-olive); 
      border:1px solid var(--card-border); 
    }
    .remove-btn:hover {
      transform:translateY(-2px) scale(1.1);
      background:var(--brand-olive);
      color:#fff;
    }
    .add-btn:active,.remove-btn:active{ 
      transform:translateY(1px) scale(0.95); 
    }

    @keyframes heartBeat {
      0%, 100% { transform:scale(1); }
      25% { transform:scale(1.2); }
      50% { transform:scale(0.95); }
      75% { transform:scale(1.1); }
    }

    .favorite-btn {
      position:absolute;
      top:8px;
      right:8px;
      background:rgba(255,255,255,0.9);
      border:none;
      border-radius:50%;
      width:32px;
      height:32px;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      font-size:1.2em;
      transition:all .3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      z-index:10;
    }
    .favorite-btn:hover {
      transform:scale(1.2) rotate(10deg);
      background:#fff;
      box-shadow:0 4px 15px rgba(0,0,0,0.2);
    }
    .favorite-btn.active {
      color:#ff6b6b;
      animation: heartBeat 0.6s ease;
    }

    @keyframes addToCart {
      0% { transform:scale(1); }
      30% { transform:scale(1.3) rotate(5deg); }
      60% { transform:scale(0.9) rotate(-5deg); }
      100% { transform:scale(1) rotate(0deg); }
    }
    .adding-animation {
      animation:addToCart .5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    @keyframes float {
      0%, 100% { transform:translateY(0px); }
      50% { transform:translateY(-10px); }
    }

    .cart-fab {
      position:fixed; 
      bottom:22px; 
      right:18px; 
      background:none; 
      border:none; 
      box-shadow:none;
      width:72px; 
      height:72px; 
      display:flex; 
      align-items:center; 
      justify-content:center;
      cursor:pointer; 
      z-index:100; 
      padding:0;
      transition:transform .3s ease;
      animation: float 3s ease-in-out infinite;
    }
    .cart-fab:hover {
      transform:scale(1.15) rotate(5deg);
      animation: none;
    }
    .cart-fab:hover .cart-preview {
      display:block;
    }
    .cart-fab svg { 
      display:block; 
      filter: drop-shadow(0 6px 20px rgba(0,0,0,0.25));
      transition:filter 0.3s;
    }
    .cart-fab:hover svg {
      filter: drop-shadow(0 8px 25px rgba(0,0,0,0.35));
    }
    .cart-fab-circle { 
      fill:var(--accent); 
      stroke:#fff; 
      stroke-width:2;
      transition:all 0.3s;
    }
    .cart-fab:hover .cart-fab-circle {
      fill:var(--brand-olive-light);
    }
    
    @keyframes bounce {
      0%, 100% { transform:scale(1); }
      50% { transform:scale(1.2); }
    }
    
    .cart-fab-count {
      position:absolute; 
      right:6px; 
      top:6px; 
      background:#fff; 
      color:var(--accent); 
      font-weight:700;
      border-radius:50%; 
      min-width:26px; 
      height:26px; 
      display:flex; 
      align-items:center; 
      justify-content:center;
      font-size:1em; 
      box-shadow:0 2px 8px rgba(0,0,0,0.12); 
      border:2px solid var(--accent);
      pointer-events:none;
      animation: bounce 0.5s ease;
    }

    @keyframes slideInRight {
      from { opacity:0; transform:translateX(20px); }
      to { opacity:1; transform:translateX(0); }
    }

    .cart-preview {
      display:none;
      position:absolute;
      bottom:80px;
      right:0;
      background:#fff;
      border:2px solid var(--brand-olive);
      border-radius:12px;
      padding:12px;
      min-width:200px;
      max-width:300px;
      box-shadow:0 8px 24px rgba(0,0,0,0.15);
      font-size:0.9em;
      animation: slideInRight 0.3s ease;
    }
    .cart-preview-title {
      font-weight:700;
      color:var(--brand-olive);
      margin-bottom:8px;
      border-bottom:1px solid #ddd;
      padding-bottom:6px;
    }
    .cart-preview-item {
      display:flex;
      justify-content:space-between;
      margin:4px 0;
      color:#333;
    }
    .cart-preview-total {
      margin-top:8px;
      padding-top:8px;
      border-top:1px solid #ddd;
      font-weight:700;
      text-align:right;
    }

    @keyframes modalFadeIn {
      from { opacity:0; }
      to { opacity:1; }
    }
    
    @keyframes modalSlideUp {
      from { opacity:0; transform:translateY(50px) scale(0.9); }
      to { opacity:1; transform:translateY(0) scale(1); }
    }

    .cart-modal-bg {
      position:fixed; 
      left:0; 
      top:0; 
      width:100vw; 
      height:100vh; 
      background:rgba(0,0,0,0.5); 
      z-index:200;
      display:flex; 
      align-items:flex-start; 
      justify-content:center; 
      animation:modalFadeIn .3s;
      backdrop-filter: blur(3px);
    }
    
    .cart-modal {
      background: var(--bg-cream); 
      border-radius:18px; 
      padding:20px 16px 16px 16px; 
      min-width:320px; 
      max-width:95vw;
      box-shadow:0 15px 50px rgba(0,0,0,0.3); 
      position:relative;
      border:2px solid var(--brand-olive);
      font-family: 'PT Sans Narrow', Arial, sans-serif;
      max-height:86vh; 
      overflow-y:auto;
      display:flex; 
      flex-direction:column;
      margin-top:36px;
      animation: modalSlideUp 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    .cart-title { 
      font-size:1.2em; 
      color:var(--brand-olive); 
      margin-bottom:10px; 
      letter-spacing:1px; 
      font-weight:800; 
    }
    .cart-list { 
      list-style:none; 
      padding:0; 
      margin:0 0 10px 0; 
    }
    .cart-list li { 
      display:flex; 
      justify-content:space-between; 
      align-items:center; 
      margin-bottom:8px; 
      color:#333;
      transition:all 0.3s;
    }
    .cart-list li:hover {
      background:rgba(255,255,255,0.5);
      padding:5px;
      border-radius:8px;
    }
    .cart-total { 
      font-size:1.05em; 
      color:#222; 
      margin-bottom:12px; 
      text-align:right; 
      font-weight:800; 
    }
    .cart-close { 
      position:absolute; 
      right:10px; 
      top:8px; 
      font-size:1.4em; 
      color:var(--brand-olive); 
      background:none; 
      border:none; 
      cursor:pointer;
      transition:all 0.3s;
    }
    .cart-close:hover {
      transform:rotate(90deg) scale(1.2);
      color:var(--accent);
    }
    .order-form input, .order-form textarea, .order-form select {
      width:100%; 
      padding:8px; 
      margin-bottom:8px; 
      border-radius:8px; 
      border:1px solid #ddd; 
      font-size:1em;
      background:#fff; 
      font-family: 'PT Sans Narrow', Arial, sans-serif;
      transition:all 0.3s;
      box-sizing:border-box;
    }
    .order-form input:focus, .order-form textarea:focus, .order-form select:focus {
      border-color:var(--brand-olive);
      box-shadow:0 0 10px rgba(85,107,47,0.2);
      outline:none;
      transform:scale(1.02);
    }
    .order-btn {
      background:var(--accent); 
      color:#fff; 
      border:none; 
      border-radius:8px; 
      padding:10px 18px; 
      font-size:1.03em; 
      font-weight:800; 
      cursor:pointer; 
      width:100%; 
      margin-top:8px;
      letter-spacing:1px;
      transition:all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      position:relative;
      overflow:hidden;
    }
    .order-btn::before {
      content:'';
      position:absolute;
      top:50%;
      left:50%;
      width:0;
      height:0;
      border-radius:50%;
      background:rgba(255,255,255,0.3);
      transform:translate(-50%, -50%);
      transition:width 0.6s, height 0.6s;
    }
    .order-btn:hover::before {
      width:400px;
      height:400px;
    }
    .order-btn:hover {
      transform:translateY(-3px) scale(1.05);
      box-shadow:0 8px 20px rgba(0,0,0,0.3);
    }
    .order-btn:active {
      transform:translateY(0) scale(0.98);
    }
    .order-success { 
      color:#2e7d32; 
      font-size:1.05em; 
      text-align:center; 
      margin-top:10px;
      animation: slideInUp 0.5s ease;
    }
    .order-processing {
      text-align:center; 
      padding:20px; 
      color:var(--brand-olive);
      animation: slideInUp 0.5s ease;
    }
    .order-processing .spinner-small {
      width:36px; 
      height:36px; 
      border:4px solid rgba(0,0,0,0.08); 
      border-top-color:var(--brand-olive);
      border-radius:50%; 
      animation:spin 1s linear infinite; 
      margin:0 auto 12px;
    }
    .order-processing-text {
      font-size:1.05em; 
      font-weight:700; 
      margin-bottom:8px;
    }
    .order-processing-subtext {
      font-size:0.95em; 
      color:var(--muted);
    }
    .delivery-info {
      background:#fff;
      border:2px solid var(--brand-olive);
      border-radius:8px;
      padding:10px;
      margin:8px 0;
      font-size:0.95em;
      color:#333;
      line-height:1.5;
      transition:all 0.3s;
    }
    .delivery-info:hover {
      box-shadow:0 5px 15px rgba(0,0,0,0.1);
      transform:translateY(-2px);
    }
    .delivery-info strong {
      color:var(--brand-olive);
      display:block;
      margin-bottom:6px;
    }
    .delivery-info-subtitle {
      font-size:0.9em;
    }
    .delivery-info-list {
      margin-top:4px;
    }
    .delivery-btn {
      background:var(--brand-olive);
      color:#fff;
      border:none;
      border-radius:8px;
      padding:10px;
      font-size:1em;
      font-weight:700;
      cursor:pointer;
      width:100%;
      margin:8px 0;
      font-family: 'PT Sans Narrow', Arial, sans-serif;
      letter-spacing:0.5px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:6px;
      transition:all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    .delivery-btn:hover {
      background:var(--brand-olive-light);
      transform:translateY(-3px);
      box-shadow:0 6px 15px rgba(0,0,0,0.2);
    }
    .delivery-modal {
      display:none;
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.5);
      z-index:250;
      align-items:center;
      justify-content:center;
      animation:modalFadeIn .3s;
      backdrop-filter: blur(3px);
    }
    .delivery-modal.show {
      display:flex;
    }
    .delivery-modal-content {
      background:var(--bg-cream);
      border-radius:16px;
      padding:20px;
      max-width:90vw;
      width:400px;
      border:2px solid var(--brand-olive);
      box-shadow:0 15px 50px rgba(0,0,0,0.3);
      position:relative;
      max-height:80vh;
      overflow-y:auto;
      animation: modalSlideUp 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    .delivery-modal-close {
      position:absolute;
      right:10px;
      top:10px;
      font-size:24px;
      color:var(--brand-olive);
      background:none;
      border:none;
      cursor:pointer;
      line-height:1;
      transition:all 0.3s;
    }
    .delivery-modal-close:hover {
      transform:rotate(90deg) scale(1.2);
      color:var(--accent);
    }

    .saved-addresses {
      margin-bottom:8px;
    }
    .saved-address-item {
      background:#f5f5f5;
      padding:8px;
      border-radius:6px;
      margin-bottom:4px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      cursor:pointer;
      transition:all .3s;
    }
    .saved-address-item:hover {
      background:#e8e8e8;
      transform:translateX(5px);
      box-shadow:0 3px 10px rgba(0,0,0,0.1);
    }
    .saved-address-delete {
      background:#ff6b6b;
      color:#fff;
      border:none;
      border-radius:4px;
      padding:4px 8px;
      cursor:pointer;
      font-size:0.85em;
      transition:all 0.3s;
    }
    .saved-address-delete:hover {
      background:#ff5252;
      transform:scale(1.1);
    }

    .history-modal {
      display:none;
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.5);
      z-index:250;
      align-items:flex-start;
      justify-content:center;
      animation:modalFadeIn .3s;
      overflow-y:auto;
      backdrop-filter: blur(3px);
    }
    .history-modal.show {
      display:flex;
    }
    .history-modal-content {
      background:var(--bg-cream);
      border-radius:16px;
      padding:20px;
      max-width:90vw;
      width:500px;
      border:2px solid var(--brand-olive);
      box-shadow:0 15px 50px rgba(0,0,0,0.3);
      position:relative;
      margin:36px auto;
      animation: modalSlideUp 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    .history-item {
      background:#fff;
      border:1px solid #ddd;
      border-radius:8px;
      padding:12px;
      margin-bottom:10px;
      transition:all 0.3s;
    }
    .history-item:hover {
      transform:translateY(-3px);
      box-shadow:0 5px 15px rgba(0,0,0,0.15);
      border-color:var(--brand-olive);
    }
    .history-item-header {
      display:flex;
      justify-content:space-between;
      margin-bottom:8px;
      font-weight:700;
      color:var(--brand-olive);
    }
    .history-item-products {
      font-size:0.9em;
      color:#555;
      margin-bottom:8px;
    }
    .history-item-footer {
      display:flex;
      justify-content:space-between;
      align-items:center;
    }
    .repeat-order-btn {
      background:var(--accent);
      color:#fff;
      border:none;
      border-radius:6px;
      padding:6px 12px;
      cursor:pointer;
      font-size:0.9em;
      font-weight:700;
      transition:all 0.3s;
    }
    .repeat-order-btn:hover {
      transform:scale(1.1);
      box-shadow:0 4px 12px rgba(0,0,0,0.2);
    }

    .image-modal {
      display:none;
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.9);
      z-index:300;
      align-items:center;
      justify-content:center;
      animation:modalFadeIn .3s;
      cursor:pointer;
      backdrop-filter: blur(5px);
    }
    .image-modal.show {
      display:flex;
    }
    
    @keyframes imageZoomIn {
      from { opacity:0; transform:scale(0.5) rotate(-5deg); }
      to { opacity:1; transform:scale(1) rotate(0deg); }
    }
    
    .image-modal img {
      max-width:90vw;
      max-height:90vh;
      border-radius:12px;
      box-shadow:0 15px 60px rgba(0,0,0,0.6);
      animation: imageZoomIn 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    .unavailable-label { display:none; }

    .product .prod-unavailable {
      position: absolute;
      left: 8px;
      right: 8px;
      top: 8px;
      background: var(--accent);
      color: #fff;
      font-size: .95em;
      border-radius: 10px;
      padding: 6px 8px;
      text-align: center;
      letter-spacing: 1px;
      z-index: 6;
      pointer-events: none;
      animation: slideInUp 0.5s ease;
    }

    #menuLoader{
      position:fixed; 
      inset:0; 
      display:flex; 
      align-items:center; 
      justify-content:center;
      background:rgba(247,239,224,0.95); 
      z-index:300; 
      opacity:0; 
      pointer-events:none; 
      transition:opacity .3s ease;
      backdrop-filter: blur(5px);
    }
    #menuLoader.visible{ 
      opacity:1; 
      pointer-events:auto; 
    }
    .loader-box{ 
      text-align:center; 
      color:var(--brand-olive);
      animation: slideInUp 0.5s ease;
    }
    .spinner{ 
      width:48px; 
      height:48px; 
      border:5px solid rgba(0,0,0,0.08); 
      border-top-color:var(--brand-olive); 
      border-radius:50%; 
      animation:spin 1s linear infinite; 
      margin:0 auto 8px; 
    }
    @keyframes spin{ 
      to{ transform:rotate(360deg); } 
    }

    @media (max-width:1000px) {
      .menu { grid-template-columns: repeat(3, minmax(140px, 1fr)); max-width:900px; }
    }
    @media (max-width:600px) {
      .menu { grid-template-columns: repeat(2, minmax(140px, 1fr)); gap:12px; max-width:720px; margin-bottom:120px; }
      .product { width:100%; max-width:220px; padding:10px 8px; }
      .product-img { width:72px; height:72px; }
      .cart-modal { min-width:92vw; padding:12px 8px 10px 8px; border-radius:16px; margin-top:12vw;}
      .cart-fab { width:56px; height:56px; bottom:12px; right:10px; top:auto !important;}
      .cart-fab-count { min-width:18px; height:18px; font-size:.9em; right:2px; top:2px; }
      .header-title { font-size:1.4em; }
      .cart-preview { bottom:70px; right:-10px; max-width:250px; }
    }
    @media (max-width:420px) {
      .menu { gap:10px; padding:0 8px; }
      .header-title { font-size:1.1rem; }
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="logo-wrap">
      <img class="logo-img" src="logo.png" alt="–°–í–û–Ø –ö–£–•–ù–Ø">
      <div>
        <div class="header-title">–°–í–û–Ø –ö–£–•–ù–Ø</div>
        <div class="header-desc">–î–æ—Å—Ç–∞–≤–∫–∞ –µ–¥—ã ‚Äî –≤–∫—É—Å–Ω–æ, –±—ã—Å—Ç—Ä–æ, —Ä—è–¥–æ–º</div>
      </div>
    </div>
    <div class="promo-banner">
      <span class="promo-star">‚òÖ</span>
      <span class="promo-text">–ú–ï–ù–Æ</span>
      <span class="promo-star">‚òÖ</span>
    </div>
  </div>

  <div class="menu-controls">
    <button onclick="filterMenu('all')" class="active" id="filterAll">–í—Å–µ –±–ª—é–¥–∞</button>
    <button onclick="filterMenu('favorites')" id="filterFavorites">‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
    <button onclick="showOrderHistory()">üìã –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</button>
  </div>

  <div id="menuLoader" aria-hidden="true">
    <div class="loader-box" role="status" aria-live="polite">
      <div class="spinner" aria-hidden="true"></div>
      <div class="loader-text">–ó–∞–≥—Ä—É–∑–∫–∞ –º–µ–Ω—é‚Ä¶</div>
    </div>
  </div>

  <div class="menu" id="menu"></div>

  <button id="cartFab" class="cart-fab" style="display:none;" title="–ö–æ—Ä–∑–∏–Ω–∞" aria-label="–ö–æ—Ä–∑–∏–Ω–∞">
    <svg viewBox="0 0 48 48" width="56" height="56" style="display:block;margin:auto;">
      <circle cx="24" cy="24" r="22" class="cart-fab-circle"/>
      <path d="M16 18h16l-2 13a3 3 0 0 1-3 2h-6a3 3 0 0 1-3-2l-2-13zm3 0v-4a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v4" fill="none" stroke="#fff" stroke-width="2.5" stroke-linecap="round"/>
      <circle cx="19" cy="36" r="2" fill="#fff"/>
      <circle cx="29" cy="36" r="2" fill="#fff"/>
    </svg>
    <span id="cartFabCount" class="cart-fab-count" aria-hidden="true"></span>
    <div class="cart-preview" id="cartPreview"></div>
  </button>

  <div id="cartModalBg" class="cart-modal-bg" style="display:none;"></div>

  <div id="deliveryModal" class="delivery-modal">
    <div class="delivery-modal-content">
      <button class="delivery-modal-close" onclick="closeDeliveryInfo()">&times;</button>
      <div class="delivery-info">
        <strong>üî∏ –î–æ—Å—Ç–∞–≤–∫–∞:</strong>
        <div class="delivery-info-subtitle">(–î–æ –≤—Ö–æ–¥–∞ –≤ –æ—Ç–µ–ª—å, –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã)</div>
        <div style="background:#e8f5e9;padding:6px;border-radius:6px;margin:6px 0;font-size:0.92em;color:#2e7d32;text-align:center;">
          ‚è±Ô∏è –ó–∞–∫–∞–∑ –±—É–¥–µ—Ç –¥–æ—Å—Ç–∞–≤–ª–µ–Ω –æ—Ç 40 –º–∏–Ω—É—Ç –¥–æ 1,5 —á–∞—Å–∞
        </div>
        <div class="delivery-info-list">
          ‚Ä¢ –¶–µ–Ω—Ç—Ä - –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –æ—Ç 150k VND<br>
          &nbsp;&nbsp;(–î–æ 150k VND - 20k VND)<br>
          ‚Ä¢ –ü—Ä–∏–≥–æ—Ä–æ–¥ - –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –æ—Ç 300k VND<br>
          &nbsp;&nbsp;(–î–æ 300k VND - 40k VND)<br>
          ‚Ä¢ –≠–∫—Å–ø—Ä–µ—Å—Å (–¥–æ—Å—Ç–∞–≤–∫–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ 30-40 –º–∏–Ω—É—Ç) - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ 30k VND<br>
        </div>
        <button class="delivery-btn" onclick="closeDeliveryInfo()">–ü–æ–Ω—è—Ç–Ω–æ</button>
      </div>
    </div>
  </div>

  <!-- –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤ -->
  <div id="historyModal" class="history-modal" aria-hidden="true">
    <div class="history-modal-content">
      <button class="delivery-modal-close" onclick="closeHistory()" aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
      <h3 style="margin-top:0;color:var(--brand-olive);">–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</h3>
      <div id="historyList"></div>
      <div style="text-align:right;">
        <button class="delivery-btn" onclick="closeHistory()">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
  <div id="imageModal" class="image-modal" onclick="closeImageModal()" aria-hidden="true">
    <img id="imageModalImg" src="" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞">
  </div>

  <script>
    // –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∫–ª—é—á–∏
    const STORAGE_KEYS = {
      CART: 'svoya_cart_v1',
      FAVORITES: 'svoya_favs_v1',
      HISTORY: 'svoya_history_v1'
    };

    const menuEl = document.getElementById('menu');
    const cartFab = document.getElementById('cartFab');
    const cartFabCount = document.getElementById('cartFabCount');
    const cartPreview = document.getElementById('cartPreview');
    const cartModalBg = document.getElementById('cartModalBg');
    const menuLoader = document.getElementById('menuLoader');
    const historyModal = document.getElementById('historyModal');
    const historyList = document.getElementById('historyList');
    const imageModal = document.getElementById('imageModal');
    const imageModalImg = document.getElementById('imageModalImg');

    // –ü—Ä–∏–º–µ—Ä –º–µ–Ω—é ‚Äî –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫–æ–π —Å —Å–µ—Ä–≤–µ—Ä–∞
    const PRODUCTS = [
      { id: 'p1', name: '–§–æ –ë–æ', desc: '–ê—Ä–æ–º–∞—Ç–Ω—ã–π –≥–æ–≤—è–∂–∏–π —Å—É–ø —Å —Ä–∏—Å–æ–≤–æ–π –ª–∞–ø—à–æ–π', price: 95000, img: 'pho.jpg', available: true },
      { id: 'p2', name: '–ë—É–Ω –ß–∞', desc: '–°–≤–∏–Ω–∏–Ω–∞ –Ω–∞ –≥—Ä–∏–ª–µ —Å —Ä–∏—Å–æ–≤–æ–π –≤–µ—Ä–º–∏—à–µ–ª—å—é', price: 120000, img: 'bun_cha.jpg', available: true },
      { id: 'p3', name: '–ù–µ–º –†–∞–Ω', desc: '–•—Ä—É—Å—Ç—è—â–∏–µ –∂–∞—Ä–µ–Ω—ã–µ —Ä–æ–ª–ª—ã', price: 75000, img: 'nem_ran.jpg', available: false },
      { id: 'p4', name: '–°–∞–ª–∞—Ç —Å –º–∞–Ω–≥–æ', desc: '–°–≤–µ–∂–∏–π —Å–∞–ª–∞—Ç —Å –º–∞–Ω–≥–æ –∏ –æ—Ä–µ—Ö–∞–º–∏', price: 80000, img: 'mango_salad.jpg', available: true },
      { id: 'p5', name: '–ö—É—Ä–∏—Ü–∞ –≤ —Å–æ—É—Å–µ –∫–∞—Ä–∞–º–µ–ª—å', desc: '–ù–µ–∂–Ω–∞—è –∫—É—Ä–∏—Ü–∞ —Å –∫–∞—Ä–∞–º–µ–ª—å–Ω–æ–π –≥–ª–∞–∑—É—Ä—å—é', price: 110000, img: 'chicken_caramel.jpg', available: true },
      { id: 'p6', name: '–í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–∞—è —Ç–∞—Ä–µ–ª–∫–∞', desc: '–û–≤–æ—â–∏ –Ω–∞ –ø–∞—Ä—É, —Ä–∏—Å –∏ —Å–æ—É—Å—ã', price: 68000, img: 'veggie.jpg', available: true }
    ];

    // –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ localStorage
    function loadState(key, defaultValue) {
      try {
        const raw = localStorage.getItem(key);
        return raw ? JSON.parse(raw) : defaultValue;
      } catch (e) {
        return defaultValue;
      }
    }
    function saveState(key, value) {
      try {
        localStorage.setItem(key, JSON.stringify(value));
      } catch (e) {
        // ignore
      }
    }

    let cart = loadState(STORAGE_KEYS.CART, {}); // { productId: qty }
    let favorites = loadState(STORAGE_KEYS.FAVORITES, {}); // { productId: true }
    let history = loadState(STORAGE_KEYS.HISTORY, []); // array of orders

    // –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–∞–¥–µ—Ä –º–µ–Ω—é –∏ —Å–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É
    function showMenuLoader(show = true) {
      menuLoader.classList.toggle('visible', show);
      menuLoader.setAttribute('aria-hidden', !show);
    }

    function formatPrice(vnd) {
      return String(vnd).replace(/\B(?=(\d{3})+(?!\d))/g, ' ') + ' VND';
    }

    function renderMenu(filter = 'all') {
      menuEl.innerHTML = '';
      const list = PRODUCTS.filter(p => {
        if (filter === 'favorites') return !!favorites[p.id];
        return true;
      });
      if (list.length === 0) {
        menuEl.innerHTML = '<p style="text-align:center;color:var(--muted);width:100%;">–ù–µ—Ç –±–ª—é–¥ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>';
        return;
      }
      list.forEach(p => {
        const prod = document.createElement('article');
        prod.className = 'product' + (p.available ? '' : ' unavailable');
        prod.setAttribute('data-id', p.id);
        prod.innerHTML = `
          ${p.available ? '' : '<div class="prod-unavailable">–ù–ï–¢ –í –ù–ê–õ–ò–ß–ò–ò</div>'}
          <button class="favorite-btn ${favorites[p.id] ? 'active' : ''}" title="–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ" aria-label="–ò–∑–±—Ä–∞–Ω–Ω–æ–µ" onclick="toggleFavorite('${p.id}', event)">${favorites[p.id] ? '‚ô•' : '‚ô°'}</button>
          <img class="product-img" src="${p.img}" alt="${p.name}" onclick="showImageModal('${p.img}')" />
          <div class="product-name">${p.name}</div>
          <div class="product-desc">${p.desc}</div>
          <div class="product-price">${formatPrice(p.price)}</div>
          <div class="controls">
            <button class="remove-btn" onclick="removeFromCart('${p.id}')">‚àí</button>
            <div style="min-width:28px;text-align:center;font-weight:800;" id="qty-${p.id}">${cart[p.id] || 0}</div>
            <button class="add-btn" onclick="addToCart('${p.id}', event)">+</button>
          </div>
        `;
        menuEl.appendChild(prod);
      });
    }

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω–æ–π
    function addToCart(id, evt) {
      const product = PRODUCTS.find(p => p.id === id);
      if (!product || !product.available) return;
      cart[id] = (cart[id] || 0) + 1;
      saveState(STORAGE_KEYS.CART, cart);
      updateQtyUI(id);
      updateCartFab();
      renderCartPreview();
      if (evt && evt.currentTarget) {
        evt.currentTarget.classList.add('adding-animation');
        setTimeout(() => evt.currentTarget.classList.remove('adding-animation'), 500);
      }
    }

    function removeFromCart(id) {
      if (!cart[id]) return;
      cart[id]--;
      if (cart[id] <= 0) delete cart[id];
      saveState(STORAGE_KEYS.CART, cart);
      updateQtyUI(id);
      updateCartFab();
      renderCartPreview();
    }

    function updateQtyUI(id) {
      const el = document.getElementById('qty-' + id);
      if (el) el.textContent = cart[id] || 0;
    }

    function updateCartFab() {
      const totalCount = Object.values(cart).reduce((s, v) => s + v, 0);
      if (totalCount > 0) {
        cartFab.style.display = 'flex';
        cartFabCount.textContent = totalCount;
        cartFab.setAttribute('aria-hidden', 'false');
      } else {
        cartFab.style.display = 'none';
        cartFab.setAttribute('aria-hidden', 'true');
      }
    }

    cartFab.addEventListener('click', openCartModal);
    cartFab.addEventListener('mouseover', renderCartPreview);

    function renderCartPreview() {
      const items = Object.keys(cart).map(id => {
        const p = PRODUCTS.find(x => x.id === id);
        return { id, name: p ? p.name : id, qty: cart[id], price: p ? p.price : 0 };
      });
      if (items.length === 0) {
        cartPreview.innerHTML = '<div class="cart-preview-title">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>';
        return;
      }
      let html = '<div class="cart-preview-title">–í –∫–æ—Ä–∑–∏–Ω–µ</div>';
      items.slice(0,5).forEach(it => {
        html += `<div class="cart-preview-item"><div>${it.name} √ó ${it.qty}</div><div>${formatPrice(it.price * it.qty)}</div></div>`;
      });
      const total = items.reduce((s, it) => s + it.qty * it.price, 0);
      html += `<div class="cart-preview-total">–ò—Ç–æ–≥–æ: ${formatPrice(total)}</div>`;
      html += `<div style="margin-top:8px;text-align:center;"><button class="delivery-btn" onclick="openCartModal()">–û—Ç–∫—Ä—ã—Ç—å –∫–æ—Ä–∑–∏–Ω—É</button></div>`;
      cartPreview.innerHTML = html;
    }

    // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–æ—Ä–∑–∏–Ω—ã
    function openCartModal() {
      renderCartModal();
      cartModalBg.style.display = 'flex';
      cartModalBg.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
    }
    function closeCartModal() {
      cartModalBg.style.display = 'none';
      cartModalBg.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
    }

    function renderCartModal() {
      const items = Object.keys(cart).map(id => {
        const p = PRODUCTS.find(x => x.id === id);
        return { id, name: p ? p.name : id, qty: cart[id], price: p ? p.price : 0, img: p ? p.img : '' };
      });
      const total = items.reduce((s, it) => s + it.qty * it.price, 0);
      cartModalBg.innerHTML = `
        <div class="cart-modal" role="dialog" aria-modal="true" aria-label="–ö–æ—Ä–∑–∏–Ω–∞">
          <button class="cart-close" onclick="closeCartModal()" aria-label="–ó–∞–∫—Ä—ã—Ç—å –∫–æ—Ä–∑–∏–Ω—É">&times;</button>
          <div class="cart-title">–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</div>
          <ul class="cart-list">
            ${items.length ? items.map(it => `
              <li>
                <div style="display:flex;gap:8px;align-items:center;">
                  <img src="${it.img}" alt="${it.name}" style="width:56px;height:56px;border-radius:8px;object-fit:cover;border:1px solid #ddd;">
                  <div>
                    <div style="font-weight:700;color:var(--brand-olive);">${it.name}</div>
                    <div style="font-size:0.9em;color:var(--muted);">${it.qty} √ó ${formatPrice(it.price)}</div>
                  </div>
                </div>
                <div style="display:flex;flex-direction:column;align-items:flex-end;gap:6px;">
                  <div style="font-weight:800;">${formatPrice(it.qty * it.price)}</div>
                  <div>
                    <button class="remove-btn" onclick="removeFromCart('${it.id}')">‚àí</button>
                    <button class="add-btn" onclick="addToCart('${it.id}')">+</button>
                  </div>
                </div>
              </li>
            `).join('') : '<li style="color:var(--muted);">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</li>'}
          </ul>
          <div class="cart-total">–ò—Ç–æ–≥–æ: ${formatPrice(total)}</div>
          <div class="order-form">
            <input id="orderName" placeholder="–í–∞—à–µ –∏–º—è" />
            <input id="orderPhone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" />
            <input id="orderAddress" placeholder="–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏" />
            <textarea id="orderNote" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É" rows="2"></textarea>
            <button class="order-btn" onclick="placeOrder()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
          </div>
        </div>
      `;
    }

    // –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ (–∏–º–∏—Ç–∞—Ü–∏—è)
    function placeOrder() {
      const items = Object.keys(cart).map(id => {
        const p = PRODUCTS.find(x => x.id === id);
        return { id, name: p ? p.name : id, qty: cart[id], price: p ? p.price : 0 };
      });
      if (items.length === 0) {
        alert('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞');
        return;
      }
      const name = document.getElementById('orderName').value.trim();
      const phone = document.getElementById('orderPhone').value.trim();
      const address = document.getElementById('orderAddress').value.trim();
      if (!name || !phone || !address) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω –∏ –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏.');
        return;
      }

      // –ü–æ–∫–∞–∑–∞—Ç—å processing
      cartModalBg.innerHTML = `
        <div class="cart-modal" role="dialog" aria-modal="true">
          <div class="order-processing">
            <div class="spinner-small" aria-hidden="true"></div>
            <div class="order-processing-text">–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª—è–µ—Ç—Å—è...</div>
            <div class="order-processing-subtext">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ</div>
          </div>
        </div>
      `;
      // –°–∏–º—É–ª—è—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏
      setTimeout(() => {
        const order = {
          id: 'ord_' + Date.now(),
          name, phone, address,
          items,
          total: items.reduce((s, it) => s + it.qty * it.price, 0),
          date: new Date().toISOString()
        };
        history.unshift(order);
        saveState(STORAGE_KEYS.HISTORY, history);
        // –æ—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É
        cart = {};
        saveState(STORAGE_KEYS.CART, cart);
        updateCartFab();
        renderCartPreview();
        // –ü–æ–∫–∞–∑–∞—Ç—å —É—Å–ø–µ—Ö
        cartModalBg.innerHTML = `
          <div class="cart-modal" role="dialog" aria-modal="true">
            <div style="text-align:center;padding:20px;">
              <div style="font-size:1.4em;font-weight:800;color:var(--brand-olive);">–°–ø–∞—Å–∏–±–æ!</div>
              <div style="margin-top:8px;">–í–∞—à –∑–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç. –û–∂–∏–¥–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞.</div>
              <div style="margin-top:12px;font-weight:700;">–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞: ${order.id}</div>
              <div style="margin-top:18px;"><button class="delivery-btn" onclick="closeCartModal()">–ó–∞–∫—Ä—ã—Ç—å</button></div>
            </div>
          </div>
        `;
      }, 1400);
    }

    // –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
    function toggleFavorite(id, evt) {
      favorites[id] = !favorites[id];
      if (!favorites[id]) delete favorites[id];
      saveState(STORAGE_KEYS.FAVORITES, favorites);
      // –û–±–Ω–æ–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É –∏ —Ñ–∏–ª—å—Ç—Ä
      if (evt && evt.currentTarget) {
        evt.currentTarget.classList.toggle('active', !!favorites[id]);
        evt.currentTarget.textContent = favorites[id] ? '‚ô•' : '‚ô°';
      }
      // –ï—Å–ª–∏ —Å–µ–π—á–∞—Å —Ñ–∏–ª—å—Ç—Ä "favorites", –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–º —Å–ø–∏—Å–æ–∫
      const favBtn = document.getElementById('filterFavorites');
      if (favBtn && favBtn.classList.contains('active')) {
        renderMenu('favorites');
      }
    }

    // –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤
    function showOrderHistory() {
      historyModal.classList.add('show');
      historyModal.setAttribute('aria-hidden', 'false');
      renderHistory();
      document.body.style.overflow = 'hidden';
    }
    function closeHistory() {
      historyModal.classList.remove('show');
      historyModal.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
    }
    function renderHistory() {
      if (!history.length) {
        historyList.innerHTML = '<p style="color:var(--muted);">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤.</p>';
        return;
      }
      historyList.innerHTML = history.map(h => `
        <div class="history-item">
          <div class="history-item-header">
            <div>–ó–∞–∫–∞–∑ ${h.id}</div>
            <div>${new Date(h.date).toLocaleString()}</div>
          </div>
          <div class="history-item-products">
            ${h.items.map(it => `${it.name} √ó ${it.qty}`).join(', ')}
          </div>
          <div class="history-item-footer">
            <div style="font-weight:800;">${formatPrice(h.total)}</div>
            <div><button class="repeat-order-btn" onclick='repeatOrder("${h.id}")'>–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button></div>
          </div>
        </div>
      `).join('');
    }

    function repeatOrder(orderId) {
      const ord = history.find(h => h.id === orderId);
      if (!ord) return;
      // –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É
      ord.items.forEach(it => {
        cart[it.id] = (cart[it.id] || 0) + it.qty;
      });
      saveState(STORAGE_KEYS.CART, cart);
      updateCartFab();
      renderCartPreview();
      closeHistory();
      openCartModal();
    }

    // –ú–æ–¥–∞–ª –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    function showImageModal(src) {
      imageModalImg.src = src;
      imageModal.classList.add('show');
      imageModal.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
    }
    function closeImageModal() {
      imageModal.classList.remove('show');
      imageModal.setAttribute('aria-hidden', 'true');
      imageModalImg.src = '';
      document.body.style.overflow = '';
    }

    // –û—Ç–∫—Ä—ã—Ç—å/–∑–∞–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–æ—Å—Ç–∞–≤–∫–µ
    function closeDeliveryInfo() {
      const dm = document.getElementById('deliveryModal');
      dm.classList.remove('show');
      dm.style.display = 'none';
      document.body.style.overflow = '';
    }
    function openDeliveryInfo() {
      const dm = document.getElementById('deliveryModal');
      dm.classList.add('show');
      dm.style.display = 'flex';
      document.body.style.overflow = 'hidden';
    }

    // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –º–µ–Ω—é –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∫–Ω–æ–ø–æ–∫
    function filterMenu(filter) {
      document.querySelectorAll('.menu-controls button').forEach(b => b.classList.remove('active'));
      if (filter === 'all') document.getElementById('filterAll').classList.add('active');
      if (filter === 'favorites') document.getElementById('filterFavorites').classList.add('active');
      renderMenu(filter);
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    (function init(){
      showMenuLoader(true);
      // –°–∏–º—É–ª—è—Ü–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, fetch)
      setTimeout(() => {
        renderMenu('all');
        updateCartFab();
        renderCartPreview();
        showMenuLoader(false);
      }, 700);
    })();

    // –î–æ—Å—Ç—É–ø –∏–∑ inline onclick –≤ —ç–ª–µ–º–µ–Ω—Ç–∞—Ö
    window.addToCart = addToCart;
    window.removeFromCart = removeFromCart;
    window.toggleFavorite = toggleFavorite;
    window.openCartModal = openCartModal;
    window.closeCartModal = closeCartModal;
    window.showOrderHistory = showOrderHistory;
    window.closeHistory = closeHistory;
    window.repeatOrder = repeatOrder;
    window.showImageModal = showImageModal;
    window.closeImageModal = closeImageModal;
    window.closeDeliveryInfo = closeDeliveryInfo;
    window.openDeliveryInfo = openDeliveryInfo;
    window.filterMenu = filterMenu;
  </script>
</body>
</html>
